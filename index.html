<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>EÅŸleme Oyunu â€“ 4 SeÃ§enekli</title>
<style>
    body {
        margin: 0;
        background: linear-gradient(#8fd3ff, #b9e1ff);
        font-family: Arial, sans-serif;
        overflow: hidden;
        user-select: none;
    }

    /* --------------------- KART TASARIMI ---------------------- */
    .card {
        width: 150px;
        height: 200px;
        background: #fff;
        border-radius: 15px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: space-between;
        padding: 10px;
        font-weight: bold;
        position: absolute;
    }

    .card img {
        width: 80%;
        height: 80%;
        object-fit: contain;
    }

    .turkishName {
        font-size: 18px;
        margin-top: 5px;
        text-transform: uppercase;
    }

    .englishName {
        font-size: 14px;
        margin-bottom: 5px;
        color: #444;
    }

    /* -------------------- 4 SEÃ‡ENEKLÄ° KARTLAR --------------------- */
    .option-row {
        position: absolute;
        top: 120px;  /* YÃ¶nerge kutusundan sonra baÅŸlasÄ±n */
        width: 100%;
        display: flex;
        justify-content: center;
        gap: 60px; /* EÅŸit mesafe */
        z-index: 2;
    }

    /* ----------------------- DRAG KARTI ---------------------------- */
    #dragCard {
        top: 360px;
        left: 50%;
        transform: translateX(-50%);
        cursor: grab;
        z-index: 5;
    }

    /* ------------------------ YÃ–NERGE KUTUSU ---------------------- */
    #instructionBox {
        position: absolute;
        top: 20px;
        left: 20px;
        width: 260px;
        padding: 12px;
        background: #ffe2b3;
        border: 3px solid #ff9b42;
        border-radius: 12px;
        font-weight: bold;
        z-index: 10;
        font-size: 17px;
        line-height: 22px;
    }

    /* ------------------------ SEMBOL BAR --------------------------- */
    #symbolBar {
        position: absolute;
        bottom: 40px;
        width: 100%;
        text-align: center;
        font-size: 32px;
        letter-spacing: 10px;
    }

    /* --------------------- SEMBOL TAHTASI -------------------------- */
    #symbolBoard {
        width: 260px;
        height: 120px;
        border: 2px dashed rgba(255,255,255,0.5);
        position: absolute;
        right: 40px;
        bottom: 40px;
        border-radius: 10px;
        font-size: 32px;
        padding: 10px;
    }

    /* SES BUTONU */
    #soundBtn {
        position: absolute;
        bottom: 10px;
        right: 10px;
        padding: 8px 14px;
        background: #fff;
        border-radius: 10px;
        border: 1px solid #888;
        cursor: pointer;
        font-weight: bold;
        z-index: 20;
    }
</style>
</head>
<body>

<!-- ------------------------- YÃ–NERGE KUTUSU ------------------------- -->
<div id="instructionBox">
    YÃ–NERGE:<br>
    - EÅžLE<br>
    - AYNI OLANI EÅžLE<br>
    - <span id="dynamicInstruction"></span>
</div>

<!-- --------------------- 4 SEÃ‡ENEKLÄ° ÃœST KARTLAR -------------------- -->
<div class="option-row">
    <div class="card" id="opt1"></div>
    <div class="card" id="opt2"></div>
    <div class="card" id="opt3"></div>
    <div class="card" id="opt4"></div>
</div>

<!-- ----------------------- DRAG KARTI ------------------------------ -->
<div class="card" id="dragCard"></div>

<!-- ----------------------- SEMBOL BAR ------------------------------ -->
<div id="symbolBar"></div>

<!-- ---------------------- SEMBOL TAHTASI --------------------------- -->
<div id="symbolBoard"></div>

<!-- SES BUTONU -->
<button id="soundBtn">ðŸ”Š Sesi Kapat</button>

<script>
/* ============================================================== */
/*                   TÃœM NESNE LÄ°STEMÄ°Z (50 ADET)                 */
/* ============================================================== */

let items = [
    // Meyveler
    {name:"ELMA", eng:"apple", file:"elma.png"},
    {name:"MUZ", eng:"banana", file:"muz.png"},
    {name:"ARMUT", eng:"pear", file:"armut.png"},
    {name:"ÃœZÃœM", eng:"grape", file:"uzum.png"},
    {name:"ANANAS", eng:"pineapple", file:"ananas.png"},
    {name:"Ã‡Ä°LEK", eng:"strawberry", file:"cilek.png"},
    {name:"KARPUZ", eng:"watermelon", file:"karpuz.png"},
    {name:"KAVUN", eng:"melon", file:"kavun.png"},
    {name:"PORTAKAL", eng:"orange", file:"portakal.png"},
    {name:"KÄ°VÄ°", eng:"kiwi", file:"kivi.png"},

    // Sebzeler
    {name:"DOMATES", eng:"tomato", file:"domates.png"},
    {name:"SALATALIK", eng:"cucumber", file:"salatalik.png"},
    {name:"BÄ°BER", eng:"pepper", file:"biber.png"},
    {name:"SARIMSAK", eng:"garlic", file:"sarimsak.png"},
    {name:"SOÄžAN", eng:"onion", file:"sogan.png"},
    {name:"BROKOLÄ°", eng:"broccoli", file:"brokoli.png"},
    {name:"HAVUÃ‡", eng:"carrot", file:"havuc.png"},
    {name:"LAHANA", eng:"cabbage", file:"lahana.png"},
    {name:"MISIR", eng:"corn", file:"misir.png"},
    {name:"PATLICAN", eng:"eggplant", file:"patlican.png"},

    // TaÅŸÄ±tlar
    {name:"ARABA", eng:"car", file:"araba.png"},
    {name:"MOTOSÄ°KLET", eng:"motorcycle", file:"motosiklet.png"},
    {name:"BÄ°SÄ°KLET", eng:"bicycle", file:"bisiklet.png"},
    {name:"GEMÄ°", eng:"ship", file:"gemi.png"},
    {name:"HELIKOPTER", eng:"helicopter", file:"helikopter.png"},
    {name:"UÃ‡AK", eng:"plane", file:"ucak.png"},
    {name:"TREN", eng:"train", file:"tren.png"},
    {name:"OTOBÃœS", eng:"bus", file:"otobus.png"},
    {name:"Ä°TFAÄ°YE", eng:"firetruck", file:"itfaiye.png"},
    {name:"KAMYON", eng:"truck", file:"kamyon.png"},

    // Hayvanlar
    {name:"ASLAN", eng:"lion", file:"aslan.png"},
    {name:"KÃ–PEK", eng:"dog", file:"kopek.png"},
    {name:"KEDÄ°", eng:"cat", file:"kedi.png"},
    {name:"TAVÅžAN", eng:"rabbit", file:"tavsan.png"},
    {name:"KUÅž", eng:"bird", file:"kus.png"},
    {name:"AYI", eng:"bear", file:"ayi.png"},
    {name:"KAPLAN", eng:"tiger", file:"kaplan.png"},
    {name:"TÄ°LKÄ°", eng:"fox", file:"tilki.png"},
    {name:"KURBAÄžA", eng:"frog", file:"kurbaÄŸa.png"},
    {name:"YUNUS", eng:"dolphin", file:"yunus.png"},
];

/* ============================================================== */
/*                    RANDOM SES CÃœMLELERÄ°                         */
/* ============================================================== */

let praiseSounds = [
    new Audio("aferin.mp3"),
    new Audio("bravo.mp3"),
    new Audio("supersin.mp3"),
    new Audio("harika.mp3")
];

let countSounds = [
    new Audio("1.mp3"), new Audio("2.mp3"), new Audio("3.mp3"),
    new Audio("4.mp3"), new Audio("5.mp3"), new Audio("6.mp3"),
    new Audio("7.mp3"), new Audio("8.mp3")
];

let finishSound = new Audio("finish.mp3");

let soundEnabled = true;

/* ============================================================== */
/*                       SESSÄ°Z BUTONU                             */
/* ============================================================== */

document.getElementById("soundBtn").onclick = () => {
    soundEnabled = !soundEnabled;
    document.getElementById("soundBtn").innerText = 
        soundEnabled ? "ðŸ”Š Sesi Kapat" : "ðŸ”‡ Sesi AÃ§";
};

/* ============================================================== */
/*                     OYUN MEKANÄ°ÄžÄ°                              */
/* ============================================================== */

let symbolCount = 8;
let earned = 0;

const bar = document.getElementById("symbolBar");
const board = document.getElementById("symbolBoard");
const dragCard = document.getElementById("dragCard");

function refreshSymbolBar() {
    bar.innerHTML = "â­".repeat(symbolCount - earned);
}
refreshSymbolBar();

/* ------------------------------------------------------------- */
/*                   KARTLARI RENDER ETME                        */
/* ------------------------------------------------------------- */

let currentItem = null;

function newRound() {
    let options = [...items];
    let correct = options[Math.floor(Math.random()*options.length)];
    currentItem = correct;

    document.getElementById("dynamicInstruction").innerText =
        correct.name + "YI EÅžLE";

    let wrongs = options.filter(x => x !== correct);
    wrongs = wrongs.sort(() => Math.random()-0.5).slice(0,3);
    let four = [...wrongs, correct].sort(() => Math.random()-0.5);

    loadCard("opt1", four[0]);
    loadCard("opt2", four[1]);
    loadCard("opt3", four[2]);
    loadCard("opt4", four[3]);

    loadCard("dragCard", correct);
}

function loadCard(id, obj) {
    const el = document.getElementById(id);
    el.innerHTML = `
        <div class="turkishName">${obj.name}</div>
        <img src="assets/${obj.file}">
        <div class="englishName">${obj.eng}</div>
    `;
}

newRound();

/* ------------------------------------------------------------- */
/*                    DRAG & DROP                                */
/* ------------------------------------------------------------- */

let offsetX=0, offsetY=0;

dragCard.addEventListener("mousedown", startDrag);
document.addEventListener("mouseup", stopDrag);
document.addEventListener("mousemove", dragMove);

let dragging = false;

function startDrag(e){
    dragging = true;
    offsetX = e.clientX - dragCard.offsetLeft;
    offsetY = e.clientY - dragCard.offsetTop;
}

function stopDrag(){
    if (!dragging) return;
    dragging = false;

    checkMatch();
}

function dragMove(e){
    if (!dragging) return;
    dragCard.style.left = (e.clientX - offsetX) + "px";
    dragCard.style.top = (e.clientY - offsetY) + "px";
}

/* ------------------------------------------------------------- */
/*                     EÅžLEME KONTROLÃœ                           */
/* ------------------------------------------------------------- */

function checkMatch() {
    const optCards = ["opt1","opt2","opt3","opt4"];

    for (let id of optCards) {
        let box = document.getElementById(id).getBoundingClientRect();
        let drag = dragCard.getBoundingClientRect();

        if (!(drag.right < box.left || 
              drag.left > box.right ||
              drag.bottom < box.top ||
              drag.top > box.bottom)) {

            let chosen = document.querySelector(`#${id} .turkishName`).innerText.trim();

            if (chosen === currentItem.name) handleCorrect();
            else handleWrong();

            return;
        }
    }

    resetDragPosition();
}

function handleCorrect() {
    if (soundEnabled) {
        let s = praiseSounds[Math.floor(Math.random()*praiseSounds.length)];
        s.play();
    }

    earned++;

    animateStar();

    if (earned >= symbolCount) setTimeout(countSymbols, 1000);
    else setTimeout(() => newRound(), 600);

    resetDragPosition();
}

function handleWrong() {
    dragCard.style.transition = "0.3s";
    dragCard.style.background = "#ffb3b3";
    setTimeout(() => {
        dragCard.style.background = "#fff";
        dragCard.style.transition = "";
        resetDragPosition();
    }, 400);
}

function resetDragPosition() {
    dragCard.style.left = "50%";
    dragCard.style.top = "360px";
    dragCard.style.transform = "translateX(-50%)";
}

/* ------------------------------------------------------------- */
/*                   SEMBOL ANÄ°MASYONU                          */
/* ------------------------------------------------------------- */

function animateStar() {
    const star = document.createElement("div");
    star.innerText = "â­";
    star.style.position = "absolute";
    star.style.left = (window.innerWidth/2 - 20) + "px";
    star.style.top = "300px";
    star.style.fontSize = "40px";
    star.style.transition = "1s ease";
    document.body.appendChild(star);

    setTimeout(()=>{
        star.style.left = (window.innerWidth - 170) + "px";
        star.style.top = (window.innerHeight - 130) + "px";
    }, 100);

    setTimeout(()=>{
        star.remove();
        refreshSymbolBar();
    }, 1100);
}

/* ------------------------------------------------------------- */
/*                 SEMBOLLARI SAYMA (BÄ°TÄ°Åž)                      */
/* ------------------------------------------------------------- */

function countSymbols() {
    let seq = 0;
    function sayNext(){
        if (seq < 8) {
            soundEnabled && countSounds[seq].play();
            seq++;
            setTimeout(sayNext, 900);
        } else {
            soundEnabled && finishSound.play();
            setTimeout(()=>{
                earned = 0;
                refreshSymbolBar();
                newRound();
            }, 1500);
        }
    }
    sayNext();
}

</script>

</body>
</html>
