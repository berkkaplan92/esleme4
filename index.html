<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Pika & Berk ‚Äì √áok Modlu Nesne E≈üleme</title>

<style>
/* Genel g√∂vde */
body{
  margin:0;
  font-family:"Comic Sans MS",system-ui,sans-serif;
  background:linear-gradient(to bottom,#ffe0c2,#ffd1a1);
  height:100vh;
  overflow:hidden;
}

/* ===================== ANA MEN√ú ===================== */
#menuScreen{
  width:100%;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}
.menu-container{
  width:90%;
  max-width:500px;
  display:flex;
  flex-direction:column;
  gap:16px;
}
.menu-title{
  text-align:center;
  font-size:32px;
  font-weight:800;
  color:#b65600;
  margin-bottom:8px;
  text-shadow:2px 2px #ffffff;
}
.menu-sub{
  text-align:center;
  font-size:16px;
  color:#6b3c07;
  margin-bottom:8px;
}
.menu-btn{
  width:100%;
  padding:14px 18px;
  border-radius:18px;
  background:#ff9f45;
  border:3px solid #ff7a00;
  color:#fff;
  font-size:20px;
  font-weight:700;
  cursor:pointer;
  transition:transform .18s,box-shadow .18s,background .18s;
  box-shadow:0 4px 10px rgba(0,0,0,.18);
}
.menu-btn:hover{
  transform:scale(1.03);
  background:#ff8c1a;
}
.menu-btn:active{
  transform:scale(.97);
  box-shadow:0 2px 6px rgba(0,0,0,.25);
}

/* ===================== OYUN EKRANI ===================== */
#gameScreen{
  width:100%;
  height:100vh;
  position:relative;
  display:none;  /* men√ºden sonra a√ßƒ±lacak */
  background:linear-gradient(to bottom right,#b3e5fc,#e1f5fe);
}

/* Y√∂nerge kutusu */
#instructionBox{
  position:absolute;
  top:20px;
  left:20px;
  width:260px;
  padding:10px 12px;
  background:#ffe2b3;
  border:3px solid #ff9b42;
  border-radius:12px;
  box-shadow:0 3px 8px rgba(0,0,0,.12);
  color:#5c3204;
  z-index:20;
}
#instructionBox .title{
  font-weight:800;
  margin-bottom:4px;
}
#instructionBox .line{
  font-size:13px;
  font-weight:700;
  text-transform:uppercase;
  margin:1px 0;
}
#dynamicInstruction{
  font-weight:800;
}

/* √úst se√ßenek kartlarƒ± satƒ±rƒ± */
#optionsRow{
  position:absolute;
  top:120px;             /* y√∂nergenin altƒ± */
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:32px;              /* birbirine yakƒ±n & e≈üit aralƒ±k */
  justify-content:center;
  align-items:flex-start;
  z-index:5;
}

/* Kart tasarƒ±mƒ± */
.option-card,.drag-card{
  width:150px;
  height:200px;
  background:#fff;
  border-radius:15px;
  box-shadow:0 4px 10px rgba(0,0,0,.2);
  border:3px solid rgba(11,132,165,.45);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:space-between;
  padding:8px;
  user-select:none;
}
.card-tr{
  font-size:16px;
  font-weight:800;
  text-transform:uppercase;
  margin-top:2px;
  text-align:center;
}
.card-img{
  width:80%;
  height:70%;
  object-fit:contain;
}
.card-en{
  font-size:13px;
  font-style:italic;
  color:#444;
  margin-bottom:4px;
}

/* S√ºr√ºklenen kart (√ßocuƒüun kartƒ±) */
#dragCard{
  position:absolute;
  bottom:18%;           /* biraz daha a≈üaƒüƒ± */
  left:50%;
  transform:translateX(-50%);
  cursor:grab;
  z-index:10;
}

/* Doƒüru / yanlƒ±≈ü g√∂rsel geri bildirim */
.correct{
  border-color:#2ecc71!important;
  box-shadow:0 0 18px rgba(46,204,113,.85)!important;
}
.wrong{
  border-color:#e74c3c!important;
  box-shadow:0 0 18px rgba(231,76,60,.85)!important;
}

/* Sembol barƒ± (alt ortada) */
#symbolBar{
  position:absolute;
  bottom:5%;            /* biraz daha a≈üaƒüƒ± */
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:6px;
  padding:6px 10px;
  border-radius:10px;
  background:rgba(255,255,255,.65);
  box-shadow:0 2px 6px rgba(0,0,0,.18);
  z-index:12;
}
.bar-slot{
  width:22px;
  height:22px;
  border-radius:6px;
  background:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:16px;
  transition:opacity .25s,transform .25s;
}
.bar-slot.empty{
  opacity:.3;
  transform:scale(.9);
}

/* Sembol tahtasƒ± (saƒü altta) */
#symbolBoard{
  position:absolute;
  right:20px;
  bottom:20px;
  width:260px;
  height:120px;
  background:url('https://cdn.pixabay.com/photo/2014/04/02/10/56/wood-306955_1280.png')center/cover no-repeat;
  border-radius:14px;
  padding:10px;
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  justify-content:center;
  align-items:center;
  box-shadow:0 4px 10px rgba(0,0,0,.25);
}
.slot{
  width:30px;
  height:30px;
  border-radius:8px;
  background:rgba(255,255,255,.25);
  text-align:center;
  line-height:30px;
  font-size:22px;
  opacity:.3;
  cursor:pointer;
  transition:all .25s;
}
.slot.active{
  opacity:1;
  transform:scale(1.06);
}

/* U√ßan yƒ±ldƒ±z animasyonu */
#flyStar{
  position:absolute;
  width:40px;
  height:40px;
  border-radius:50%;
  background:gold;
  box-shadow:0 0 12px rgba(255,215,0,.9);
  top:50%;
  left:50%;
  transform:translate(-50%,-50%) scale(0);
  opacity:0;
  pointer-events:none;
  z-index:999;
  transition:all .35s;
}

/* Ses ve geri butonlarƒ± */
#toggleAudio,#backToMenu{
  position:absolute;
  right:20px;
  padding:8px 12px;
  border-radius:18px;
  border:0;
  font-weight:700;
  cursor:pointer;
  box-shadow:0 3px 8px rgba(0,0,0,.2);
  background:#1976d2;
  color:#fff;
  z-index:30;
}
#toggleAudio{ bottom:20px; }
#backToMenu{
  top:20px;
  background:#ff9f45;
}

/* K√º√ß√ºk ekran uyumu */
@media(max-width:768px){
  #optionsRow{
    gap:16px;
    transform:translateX(-50%) scale(.9);
  }
  .option-card,.drag-card{
    width:135px;
    height:185px;
  }
}
</style>
</head>
<body>

<!-- ===================== ANA MEN√ú ===================== -->
<div id="menuScreen">
  <div class="menu-container">
      <div class="menu-title">üéØ NESNE E≈ûLEME OYUNU</div>
      <div class="menu-sub">Bir e≈üleme modu se√ß ve oyuna ba≈üla!</div>

      <button class="menu-btn" onclick="startGame(1)">1 Se√ßenekli E≈üleme</button>
      <button class="menu-btn" onclick="startGame(2)">2 Se√ßenekli E≈üleme</button>
      <button class="menu-btn" onclick="startGame(3)">3 Se√ßenekli E≈üleme</button>
      <button class="menu-btn" onclick="startGame(4)">4 Se√ßenekli E≈üleme</button>
      <button class="menu-btn" onclick="startGame(5)">5 Se√ßenekli E≈üleme</button>
      <button class="menu-btn" onclick="startGame(7)">7 Se√ßenekli E≈üleme</button>
  </div>
</div>


<!-- ===================== OYUN EKRANI ===================== -->
<div id="gameScreen">

    <!-- Y√∂nerge Kutusu -->
    <div id="instructionBox">
        <div class="title">Y√ñNERGE :</div>
        <div class="line">E≈üle</div>
        <div class="line">Aynƒ± olanƒ± e≈üle</div>
        <div id="dynamicInstruction" class="line">ELMAYI E≈ûLE</div>
    </div>

    <!-- √úst se√ßenek kartlarƒ± -->
    <div id="optionsRow"></div>

    <!-- √áocuƒüun s√ºr√ºklediƒüi kart -->
    <div id="dragCard" class="drag-card">
        <div class="card-tr" id="dragTR"></div>
        <img id="dragIMG" class="card-img">
        <div class="card-en" id="dragEN"></div>
    </div>

    <!-- Sembol Barƒ± (toplanacak yƒ±ldƒ±zlar) -->
    <div id="symbolBar"></div>

    <!-- Sembol Tahtasƒ± -->
    <div id="symbolBoard">
        <!-- 8 slot -->
        <div class="slot" data-i="0"></div>
        <div class="slot" data-i="1"></div>
        <div class="slot" data-i="2"></div>
        <div class="slot" data-i="3"></div>
        <div class="slot" data-i="4"></div>
        <div class="slot" data-i="5"></div>
        <div class="slot" data-i="6"></div>
        <div class="slot" data-i="7"></div>
    </div>

    <!-- U√ßan yƒ±ldƒ±z animasyonu -->
    <div id="flyStar">‚≠ê</div>

    <!-- Ses A√ß/Kapat -->
    <button id="toggleAudio" onclick="toggleAudio()">üîä Ses A√ßƒ±k</button>

    <!-- Geri d√∂n -->
    <button id="backToMenu" onclick="returnToMenu()">‚Üê Men√º</button>

</div>
<script>
/* ============================================================
   Pƒ∞KA & BERK ‚Äî √áOK MODLU E≈ûLEME OYUN MOTORU
   PAR√áA 3A ‚Äî Men√º ‚Üí Oyun ge√ßi≈üi + Nesne seti
============================================================ */

/* MEN√úDEN OYUNA GE√áƒ∞≈û */
let optionCount = 1;       // ka√ß se√ßenekli oyun
let audioEnabled = true;   // ses a√ßƒ±k/kapalƒ±
let currentTarget = null;  // hedef nesne
let currentChoices = [];   // se√ßenek kartlarƒ±
let symbolsCollected = 0;  // kazanƒ±lan semboller (max 8)

/* Men√ºden oyun ekranƒ±na ge√ß */
function startGame(n){
    optionCount = n;
    document.getElementById("menuScreen").style.display = "none";
    document.getElementById("gameScreen").style.display = "block";
    initializeGame();
}

/* Men√ºye geri d√∂n */
function returnToMenu(){
    location.reload(); // en temiz y√∂ntem
}

/* SES A√á/KAPAT */
function toggleAudio(){
    audioEnabled = !audioEnabled;
    const btn = document.getElementById("toggleAudio");
    btn.textContent = audioEnabled ? "üîä Ses A√ßƒ±k" : "üîá Ses Kapalƒ±";
}

/* ================= NESNE SETƒ∞ (T√ºrk√ße ‚Äì ƒ∞ngilizce ‚Äì G√∂rsel) ================= */
const items = [
    {tr:"Elma", en:"Apple", img:"assets/elma.png"},
    {tr:"Muz", en:"Banana", img:"assets/muz.png"},
    {tr:"Armut", en:"Pear", img:"assets/armut.png"},
    {tr:"Karpuz", en:"Watermelon", img:"assets/karpuz.png"},
    {tr:"√úz√ºm", en:"Grapes", img:"assets/uzum.png"},
    {tr:"Kavun", en:"Melon", img:"assets/kavun.png"},
    {tr:"Portakal", en:"Orange", img:"assets/portakal.png"},
    {tr:"Kivi", en:"Kiwi", img:"assets/kivi.png"},
    {tr:"√áilek", en:"Strawberry", img:"assets/cilek.png"},
    {tr:"Ananas", en:"Pineapple", img:"assets/ananas.png"},

    {tr:"Domates", en:"Tomato", img:"assets/domates.png"},
    {tr:"Salatalƒ±k", en:"Cucumber", img:"assets/salatalik.png"},
    {tr:"Biber", en:"Pepper", img:"assets/biber.png"},
    {tr:"Soƒüan", en:"Onion", img:"assets/sogan.png"},
    {tr:"Sarƒ±msak", en:"Garlic", img:"assets/sarimsak.png"},
    {tr:"Brokoli", en:"Broccoli", img:"assets/brokoli.png"},
    {tr:"Havu√ß", en:"Carrot", img:"assets/havuc.png"},
    {tr:"Lahana", en:"Cabbage", img:"assets/lahana.png"},
    {tr:"Mƒ±sƒ±r", en:"Corn", img:"assets/misir.png"},
    {tr:"Patlƒ±can", en:"Eggplant", img:"assets/patlican.png"},

    {tr:"Araba", en:"Car", img:"assets/araba.png"},
    {tr:"Kamyon", en:"Truck", img:"assets/kamyon.png"},
    {tr:"Otob√ºs", en:"Bus", img:"assets/otobus.png"},
    {tr:"Gemi", en:"Ship", img:"assets/gemi.png"},
    {tr:"U√ßak", en:"Plane", img:"assets/ucak.png"},
    {tr:"Helikopter", en:"Helicopter", img:"assets/helikopter.png"},
    {tr:"Bisiklet", en:"Bicycle", img:"assets/bisiklet.png"},
    {tr:"Motosiklet", en:"Motorcycle", img:"assets/motosiklet.png"},
    {tr:"Tren", en:"Train", img:"assets/tren.png"},
    {tr:"ƒ∞tfaiye", en:"Firetruck", img:"assets/itfaiye.png"},

    {tr:"K√∂pek", en:"Dog", img:"assets/kopek.png"},
    {tr:"Kedi", en:"Cat", img:"assets/kedi.png"},
    {tr:"Aslan", en:"Lion", img:"assets/aslan.png"},
    {tr:"Kaplan", en:"Tiger", img:"assets/kaplan.png"},
    {tr:"Ayƒ±", en:"Bear", img:"assets/ayi.png"},
    {tr:"Tav≈üan", en:"Rabbit", img:"assets/tavsan.png"},
    {tr:"Koyun", en:"Sheep", img:"assets/koyun.png"},
    {tr:"ƒ∞nek", en:"Cow", img:"assets/inek.png"},
    {tr:"At", en:"Horse", img:"assets/at.png"},
    {tr:"Tavuk", en:"Chicken", img:"assets/tavuk.png"}
];

/* Rastgele karƒ±≈ütƒ±r */
function shuffle(arr){
    for(let i = arr.length -1; i > 0; i--){
        const j = Math.floor(Math.random() * (i+1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
    }
}
<script>
/* ============================================================
   Pƒ∞KA & BERK ‚Äî √áOK MODLU E≈ûLEME OYUN MOTORU
   PAR√áA 3A ‚Äî Men√º ‚Üí Oyun ge√ßi≈üi + Nesne seti
============================================================ */

/* MEN√úDEN OYUNA GE√áƒ∞≈û */
let optionCount = 1;       // ka√ß se√ßenekli oyun
let audioEnabled = true;   // ses a√ßƒ±k/kapalƒ±
let currentTarget = null;  // hedef nesne
let currentChoices = [];   // se√ßenek kartlarƒ±
let symbolsCollected = 0;  // kazanƒ±lan semboller (max 8)

/* Men√ºden oyun ekranƒ±na ge√ß */
function startGame(n){
    optionCount = n;
    document.getElementById("menuScreen").style.display = "none";
    document.getElementById("gameScreen").style.display = "block";
    initializeGame();
}

/* Men√ºye geri d√∂n */
function returnToMenu(){
    location.reload(); // en temiz y√∂ntem
}

/* SES A√á/KAPAT */
function toggleAudio(){
    audioEnabled = !audioEnabled;
    const btn = document.getElementById("toggleAudio");
    btn.textContent = audioEnabled ? "üîä Ses A√ßƒ±k" : "üîá Ses Kapalƒ±";
}

/* ================= NESNE SETƒ∞ (T√ºrk√ße ‚Äì ƒ∞ngilizce ‚Äì G√∂rsel) ================= */
const items = [
    {tr:"Elma", en:"Apple", img:"assets/elma.png"},
    {tr:"Muz", en:"Banana", img:"assets/muz.png"},
    {tr:"Armut", en:"Pear", img:"assets/armut.png"},
    {tr:"Karpuz", en:"Watermelon", img:"assets/karpuz.png"},
    {tr:"√úz√ºm", en:"Grapes", img:"assets/uzum.png"},
    {tr:"Kavun", en:"Melon", img:"assets/kavun.png"},
    {tr:"Portakal", en:"Orange", img:"assets/portakal.png"},
    {tr:"Kivi", en:"Kiwi", img:"assets/kivi.png"},
    {tr:"√áilek", en:"Strawberry", img:"assets/cilek.png"},
    {tr:"Ananas", en:"Pineapple", img:"assets/ananas.png"},

    {tr:"Domates", en:"Tomato", img:"assets/domates.png"},
    {tr:"Salatalƒ±k", en:"Cucumber", img:"assets/salatalik.png"},
    {tr:"Biber", en:"Pepper", img:"assets/biber.png"},
    {tr:"Soƒüan", en:"Onion", img:"assets/sogan.png"},
    {tr:"Sarƒ±msak", en:"Garlic", img:"assets/sarimsak.png"},
    {tr:"Brokoli", en:"Broccoli", img:"assets/brokoli.png"},
    {tr:"Havu√ß", en:"Carrot", img:"assets/havuc.png"},
    {tr:"Lahana", en:"Cabbage", img:"assets/lahana.png"},
    {tr:"Mƒ±sƒ±r", en:"Corn", img:"assets/misir.png"},
    {tr:"Patlƒ±can", en:"Eggplant", img:"assets/patlican.png"},

    {tr:"Araba", en:"Car", img:"assets/araba.png"},
    {tr:"Kamyon", en:"Truck", img:"assets/kamyon.png"},
    {tr:"Otob√ºs", en:"Bus", img:"assets/otobus.png"},
    {tr:"Gemi", en:"Ship", img:"assets/gemi.png"},
    {tr:"U√ßak", en:"Plane", img:"assets/ucak.png"},
    {tr:"Helikopter", en:"Helicopter", img:"assets/helikopter.png"},
    {tr:"Bisiklet", en:"Bicycle", img:"assets/bisiklet.png"},
    {tr:"Motosiklet", en:"Motorcycle", img:"assets/motosiklet.png"},
    {tr:"Tren", en:"Train", img:"assets/tren.png"},
    {tr:"ƒ∞tfaiye", en:"Firetruck", img:"assets/itfaiye.png"},

    {tr:"K√∂pek", en:"Dog", img:"assets/kopek.png"},
    {tr:"Kedi", en:"Cat", img:"assets/kedi.png"},
    {tr:"Aslan", en:"Lion", img:"assets/aslan.png"},
    {tr:"Kaplan", en:"Tiger", img:"assets/kaplan.png"},
    {tr:"Ayƒ±", en:"Bear", img:"assets/ayi.png"},
    {tr:"Tav≈üan", en:"Rabbit", img:"assets/tavsan.png"},
    {tr:"Koyun", en:"Sheep", img:"assets/koyun.png"},
    {tr:"ƒ∞nek", en:"Cow", img:"assets/inek.png"},
    {tr:"At", en:"Horse", img:"assets/at.png"},
    {tr:"Tavuk", en:"Chicken", img:"assets/tavuk.png"}
];

/* Rastgele karƒ±≈ütƒ±r */
function shuffle(arr){
    for(let i = arr.length -1; i > 0; i--){
        const j = Math.floor(Math.random() * (i+1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
    }
}
/* ============================================================
   PAR√áA 3C ‚Äî DRAG & DROP, SEMBOL Sƒ∞STEMƒ∞, ANƒ∞MASYON, SESLER
============================================================ */

/* ===================== S√úR√úKLE-BIRAK ===================== */

let dragging = false;
let offsetX = 0;
let offsetY = 0;

const dragCard = document.getElementById("dragCard");

dragCard.addEventListener("mousedown", startDrag);
document.addEventListener("mouseup", stopDrag);
document.addEventListener("mousemove", dragMove);

function startDrag(e){
    dragging = true;
    dragCard.style.transition = "";
    offsetX = e.clientX - dragCard.offsetLeft;
    offsetY = e.clientY - dragCard.offsetTop;
}

function stopDrag(){
    if(!dragging) return;
    dragging = false;

    checkDropTarget();
}

function dragMove(e){
    if(!dragging) return;

    dragCard.style.left = (e.clientX - offsetX) + "px";
    dragCard.style.top  = (e.clientY - offsetY) + "px";
}

/* S√ºr√ºklenen kart, se√ßeneklerden birine temas ediyor mu? */
function checkDropTarget(){
    let options = [...document.querySelectorAll(".option-card")];

    let d = dragCard.getBoundingClientRect();

    for(let opt of options){
        let b = opt.getBoundingClientRect();

        if( !(d.right < b.left || d.left > b.right || d.bottom < b.top || d.top > b.bottom) ){
            // temas var
            let chosen = opt.dataset.tr;
            let target = currentTarget.tr;

            if(chosen === target){
                opt.classList.add("correct");
                setTimeout(()=> opt.classList.remove("correct"),400);
                giveSymbol();
                setTimeout(()=>{
                    resetDragPosition();
                    createNewRound();
                },600);
            } else {
                opt.classList.add("wrong");
                setTimeout(()=> opt.classList.remove("wrong"),400);
                resetDragPosition();
            }
            return;
        }
    }

    // hi√ßbir karta temas yoksa geri d√∂ns√ºn
    resetDragPosition();
}

function resetDragPosition(){
    dragCard.style.transition = "0.3s";
    dragCard.style.left = "50%";
    dragCard.style.top  = "80%";
    dragCard.style.transform = "translateX(-50%)";
}


/* ===================== SES Sƒ∞STEMƒ∞ ===================== */

const praiseSounds = [
    new Audio("ses/aferin.mp3"),
    new Audio("ses/bravo.mp3"),
    new Audio("ses/supersin.mp3"),
    new Audio("ses/harika.mp3")
];

const countSounds = [
    new Audio("ses/1.mp3"),
    new Audio("ses/2.mp3"),
    new Audio("ses/3.mp3"),
    new Audio("ses/4.mp3"),
    new Audio("ses/5.mp3"),
    new Audio("ses/6.mp3"),
    new Audio("ses/7.mp3"),
    new Audio("ses/8.mp3")
];

const finishSound = new Audio("ses/finish.mp3");

function playPraise(){
    if(!audioEnabled) return;
    let s = praiseSounds[Math.floor(Math.random() * praiseSounds.length)];
    s.play();
}


/* ===================== SEMBOL Sƒ∞STEMƒ∞ ===================== */

function fillSymbolBar(){
    const bar = document.getElementById("symbolBar");
    bar.innerHTML = "";
    for(let i=0; i<8; i++){
        let d = document.createElement("div");
        d.className = "bar-slot empty";
        d.dataset.index = i;
        bar.appendChild(d);
    }
}

function markSymbolOnBar(i){
    let slot = document.querySelector(`.bar-slot[data-index='${i}']`);
    slot.classList.remove("empty");
    slot.textContent = "‚≠ê";
}


/* ===================== U√áAN YILDIZ ANƒ∞MASYONU ===================== */

function animateStar(index){
    const star = document.getElementById("flyStar");
    const board = document.getElementById("symbolBoard");
    const slot = document.querySelector(`.slot[data-i='${index}']`);

    // animasyon ba≈ülangƒ±cƒ±
    star.style.opacity = "1";
    star.style.transform = "translate(-50%, -50%) scale(1)";

    setTimeout(()=>{
        let rect = slot.getBoundingClientRect();
        star.style.left = rect.left + "px";
        star.style.top  = rect.top  + "px";
        star.style.transform = "scale(.1)";
        star.style.opacity = "0";
    }, 150);
}


/* ===================== SEMBOL KAZANMA ===================== */

function giveSymbol(){
    playPraise();
    animateStar(symbolsCollected);

    // tahtada yƒ±ldƒ±zƒ± aktif et
    let slot = document.querySelector(`.slot[data-i='${symbolsCollected}']`);
    slot.classList.add("active");
    slot.textContent = "‚≠ê";

    // bar √ºzerinde de g√∂ster
    markSymbolOnBar(symbolsCollected);

    symbolsCollected++;

    if(symbolsCollected === 8){
        setTimeout(()=> countSymbols(), 900);
    }
}


/* ===================== SEMBOL SAYMA Sƒ∞STEMƒ∞ ===================== */

function countSymbols(){
    if(!audioEnabled){
        finishAndRestart();
        return;
    }

    let i = 0;

    function sayNext(){
        if(i < 8){
            countSounds[i].play();
            i++;
            setTimeout(()=> sayNext(), 900);
        } else {
            finishSound.play();
            setTimeout(()=> finishAndRestart(), 1500);
        }
    }

    sayNext();
}

function finishAndRestart(){
    symbolsCollected = 0;
    fillSymbolBar();

    // tahtayƒ± temizle
    document.querySelectorAll(".slot").forEach(s=>{
        s.classList.remove("active");
        s.textContent = "";
    });

    // yeni oyuna ba≈üla
    createNewRound();
}


/* ===================== TAHTADAN SEMBOL GERƒ∞ ALMA ‚Äî (ƒ∞steƒüe baƒülƒ±) ===================== */
/* Sembol tahtasƒ±ndaki yƒ±ldƒ±zlara tƒ±klayƒ±nca ‚Äús√∂kt√ºrme + saydƒ±rma modu‚Äù  */

document.querySelectorAll(".slot").forEach(slot=>{
    slot.addEventListener("click", ()=>{
        if(!slot.classList.contains("active")) return;

        let index = parseInt(slot.dataset.i);
        slot.classList.remove("active");
        slot.textContent = "";

        // bar'da da kaldƒ±r
        let barSlot = document.querySelector(`.bar-slot[data-index='${index}']`);
        barSlot.classList.add("empty");
        barSlot.textContent = "";

        symbolsCollected--;

        if(audioEnabled && countSounds[index]){
            countSounds[index].play();
        }
    });
});

</script>
</html>
