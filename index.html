<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<title>Nesne E≈üleme Oyunu - V25 MASTER</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    * {
        box-sizing: border-box;
        user-select: none;
        -webkit-user-drag: none;
    }

    body {
        margin: 0;
        padding: 0;
        font-family: Arial, sans-serif;
        background: linear-gradient(180deg, #dff1ff, #aed7ff);
        overflow: hidden;
        height: 100vh;
        width: 100vw;
    }

    /* --- GENEL KART TASARIMI --- */
    .card {
        position: absolute;
        width: 165px;
        height: 240px;
        background: #ffffff;
        border-radius: 20px;
        border: 3px solid #dee3e9;
        box-shadow: 0 6px 14px rgba(0,0,0,0.18);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: space-between;
        padding: 10px 8px;
        text-align: center;
        transition: transform 0.15s, box-shadow 0.15s;
    }

    .card.correct {
        border-color: #2ecc71;
        box-shadow: 0 0 14px rgba(46,204,113,0.9);
    }

    .card.wrong {
        border-color: #e74c3c;
        box-shadow: 0 0 14px rgba(231,76,60,0.9);
    }

    .card img {
        width: 120px;
        height: 120px;
        object-fit: contain;
    }

    .cardTitleTr {
        font-size: 18px;
        font-weight: 800;
        color: #1b3c57;
        margin-top: 2px;
    }

    .cardTitleEn {
        font-size: 15px;
        font-weight: 600;
        color: #4a6074;
        margin-bottom: 5px;
    }

    /* --- MEN√ú TASARIMI (B se√ßeneƒüi ‚Äî sade mavi) --- */
    #menu {
        position: absolute;
        inset: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    #menuTitle {
        font-size: 36px;
        font-weight: 900;
        color: #003f73;
        margin-bottom: 10px;
    }

    #menuSubtitle {
        font-size: 18px;
        color: #0d568f;
        margin-bottom: 22px;
    }

    .menu-btn {
        width: 260px;
        padding: 13px 10px;
        margin: 6px 0;
        border-radius: 16px;
        border: 2px solid #4a90d9;
        background: #e9f4ff;
        color: #064b7d;
        font-size: 18px;
        font-weight: bold;
        cursor: pointer;
        box-shadow: 0 3px 6px rgba(0,0,0,0.15);
        transition: 0.15s;
    }

    .menu-btn:hover {
        background: #d8ecff;
    }

    /* --- GERƒ∞ D√ñN√ú≈û S√úR√úKLEME BAR (SAƒû ‚Üí SOL) --- */
    #slideBackArea {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 70px;
        background: rgba(255,255,255,0.45);
        backdrop-filter: blur(4px);
        border-bottom: 2px solid #bdd7f0;
        display: none;
    }

    #slideTrack {
        position: absolute;
        top: 20px;
        left: 40px;
        right: 70px;
        height: 35px;
        background: #d6eaff;
        border-radius: 25px;
        border: 2px solid #8bb9e2;
    }

    #slideText {
        position: absolute;
        top: 25px;
        left: 60px;
        font-size: 14px;
        font-weight: bold;
        color: #054b75;
        pointer-events: none;
    }

    #slideBall {
        position: absolute;
        top: 12px;
        right: 10px; /* saƒüdan sola s√ºr√ºklenecek */
        width: 48px;
        height: 48px;
        background: #4aa3ff;
        border-radius: 50%;
        border: 3px solid #1d6fc2;
        cursor: grab;
        box-shadow: 0 3px 6px rgba(0,0,0,0.25);
    }

    /* --- OYUN EKRANI --- */
    #gameArea {
        position: absolute;
        inset: 0;
        display: none;
    }

    /* Y√∂nerge kutusu (sol altta) */
    #instructionBox {
        position: absolute;
        left: 25px;
        bottom: 160px;
        width: 240px;
        padding: 12px 14px;
        background: #ffefcf;
        border: 3px solid #e6b574;
        border-radius: 18px;
        box-shadow: 0 3px 7px rgba(0,0,0,0.25);
        font-size: 16px;
        font-weight: bold;
        line-height: 1.4;
    }

    /* Sembol barƒ± (alt orta) */
    #symbolBar {
        position: absolute;
        left: 50%;
        bottom: 50px;
        transform: translateX(-50%);
        display: flex;
        gap: 8px;
    }

    .bar-star {
        font-size: 30px;
    }

    /* Sembol tahtasƒ± (saƒü alt) */
    #symbolBoard {
        position: absolute;
        right: 20px;
        bottom: 35px;
        width: 200px;
        height: 110px;
        background: #f7e5c8;
        border: 3px solid #b27c39;
        border-radius: 18px;
        padding: 8px;
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
        gap: 6px;
        box-shadow: 0 3px 6px rgba(0,0,0,0.2);
    }

    .board-star {
        font-size: 32px;
        cursor: pointer;
    }

    /* U√ßan yƒ±ldƒ±z animasyonu */
    .flying-star {
        position: absolute;
        font-size: 32px;
        pointer-events: none;
        z-index: 999;
        transition: transform 0.6s ease-out, opacity 0.6s ease-out;
    }

    /* Ses butonu */
    #soundToggle {
        position: absolute;
        right: 25px;
        top: 80px;
        padding: 8px 14px;
        border-radius: 16px;
        border: 2px solid #4a90d9;
        background: #e9f4ff;
        color: #074a7c;
        font-weight: bold;
        cursor: pointer;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }

</style>
</head>

<body>
<!-- ========== GERƒ∞ D√ñNMEK ƒ∞√áƒ∞N S√úR√úKLE (SAƒû ‚Üí SOL) ========== -->
<div id="slideBackArea">
    <div id="slideTrack"></div>
    <div id="slideText">MEN√úYE D√ñNMEK ƒ∞√áƒ∞N S√úR√úKLE ‚Üê</div>
    <div id="slideBall"></div>
</div>

<!-- ========== MEN√ú ========== -->
<div id="menu">
    <div id="menuTitle">NESNE E≈ûLEME OYUNU</div>
    <div id="menuSubtitle">Bir e≈üleme modu se√ß ve oyuna ba≈üla!</div>

    <button class="menu-btn" onclick="startGame(1)">1 Se√ßenekli E≈üleme</button>
    <button class="menu-btn" onclick="startGame(2)">2 Se√ßenekli E≈üleme</button>
    <button class="menu-btn" onclick="startGame(3)">3 Se√ßenekli E≈üleme</button>
    <button class="menu-btn" onclick="startGame(4)">4 Se√ßenekli E≈üleme</button>
    <button class="menu-btn" onclick="startGame(5)">5 Se√ßenekli E≈üleme</button>
    <button class="menu-btn" onclick="startGame(7)">7 Se√ßenekli E≈üleme</button>
</div>

<!-- ========== OYUN EKRANI ========== -->
<div id="gameArea">

    <!-- Y√∂nerge Kutusu (Sol Alt) -->
    <div id="instructionBox"></div>

    <!-- Sembol Barƒ± (Alt Orta) -->
    <div id="symbolBar"></div>

    <!-- Sembol Tahtasƒ± (Saƒü Alt) -->
    <div id="symbolBoard"></div>

    <!-- Ses A√ß / Kapat -->
    <button id="soundToggle">üîä Sesi Kapat</button>
    <!-- ========== OYUN KART ALANI ========== -->

    <!-- √úSTTEKƒ∞ SE√áENEK KARTLARI Dƒ∞NAMƒ∞K OLARAK EKLENECEK -->
    <div id="optionsArea"></div>

    <!-- S√úR√úKLENEN KART (Dƒ∞NAMƒ∞K OLARAK DOLDURULACAK) -->
    <div id="dragCardContainer"></div>

</div> <!-- gameArea kapanƒ±≈üƒ± -->

<!-- SCRIPT burada ba≈ülayacak (PAR√áA 4) -->
<script>
/* ==================== GENEL DEƒûƒ∞≈ûKENLER ==================== */

let selectedMode = 1;          // 1,2,3,4,5,7 se√ßenek
let currentItem = null;        // ≈üu an e≈ülenen nesne
let currentChoices = [];       // √ºstteki se√ßenekler
let dragCard = null;           // s√ºr√ºklenen kart
let dragStartX = 0, dragStartY = 0;
let cardStartX = 0, cardStartY = 0;
let correctCountForItem = 0;   // aynƒ± nesneyi ka√ß defa doƒüru e≈üledi (2 olunca yeni nesne)

const maxSymbols = 8;
let collectedSymbols = 0;
let countingMode = false;      // 8 yƒ±ldƒ±z doldu mu, sayma moduna ge√ß
let soundEnabled = true;

const menu      = document.getElementById("menu");
const gameArea  = document.getElementById("gameArea");
const slideBackArea = document.getElementById("slideBackArea");
const slideBall = document.getElementById("slideBall");
const slideTrack= document.getElementById("slideTrack");
const instructionBox = document.getElementById("instructionBox");
const symbolBar = document.getElementById("symbolBar");
const symbolBoard = document.getElementById("symbolBoard");
const soundBtn  = document.getElementById("soundToggle");
const optionsArea = document.getElementById("optionsArea");
const dragContainer = document.getElementById("dragCardContainer");

/* ==================== NESNE Lƒ∞STESƒ∞ ==================== */
/* PNG‚Äôleri assets klas√∂r√ºne bu isimlerle koyuyorsun (512x512 √∂nerdiƒüimiz) */

const allObjects = [
    // Meyveler
    { id:"elma",      tr:"ELMA",        en:"Apple",       img:"assets/elma.png" },
    { id:"muz",       tr:"MUZ",         en:"Banana",      img:"assets/muz.png" },
    { id:"armut",     tr:"ARMUT",       en:"Pear",        img:"assets/armut.png" },
    { id:"uzum",      tr:"√úZ√úM",        en:"Grape",       img:"assets/uzum.png" },
    { id:"ananas",    tr:"ANANAS",      en:"Pineapple",   img:"assets/ananas.png" },
    { id:"cilek",     tr:"√áƒ∞LEK",       en:"Strawberry",  img:"assets/cilek.png" },
    { id:"karpuz",    tr:"KARPUZ",      en:"Watermelon",  img:"assets/karpuz.png" },
    { id:"kavun",     tr:"KAVUN",       en:"Melon",       img:"assets/kavun.png" },
    { id:"portakal",  tr:"PORTAKAL",    en:"Orange",      img:"assets/portakal.png" },
    { id:"kivi",      tr:"Kƒ∞Vƒ∞",        en:"Kiwi",        img:"assets/kivi.png" },

    // Sebzeler
    { id:"domates",   tr:"DOMATES",     en:"Tomato",      img:"assets/domates.png" },
    { id:"salatalik", tr:"SALATALIK",   en:"Cucumber",    img:"assets/salatalik.png" },
    { id:"biber",     tr:"Bƒ∞BER",       en:"Pepper",      img:"assets/biber.png" },
    { id:"sarimsak",  tr:"SARIMSAK",    en:"Garlic",      img:"assets/sarimsak.png" },
    { id:"sogan",     tr:"SOƒûAN",       en:"Onion",       img:"assets/sogan.png" },
    { id:"brokoli",   tr:"BROKOLƒ∞",     en:"Broccoli",    img:"assets/brokoli.png" },
    { id:"havuc",     tr:"HAVU√á",       en:"Carrot",      img:"assets/havuc.png" },
    { id:"lahana",    tr:"LAHANA",      en:"Cabbage",     img:"assets/lahana.png" },
    { id:"misir",     tr:"MISIR",       en:"Corn",        img:"assets/misir.png" },
    { id:"patlican",  tr:"PATLICAN",    en:"Eggplant",    img:"assets/patlican.png" },

    // Ta≈üƒ±tlar
    { id:"araba",     tr:"ARABA",       en:"Car",         img:"assets/araba.png" },
    { id:"kamyon",    tr:"KAMYON",      en:"Truck",       img:"assets/kamyon.png" },
    { id:"motosiklet",tr:"MOTOSƒ∞KLET",  en:"Motorcycle",  img:"assets/motosiklet.png" },
    { id:"bisiklet",  tr:"Bƒ∞Sƒ∞KLET",    en:"Bicycle",     img:"assets/bisiklet.png" },
    { id:"gemi",      tr:"GEMƒ∞",        en:"Ship",        img:"assets/gemi.png" },
    { id:"helikopter",tr:"HELƒ∞KOPTER",  en:"Helicopter",  img:"assets/helikopter.png" },
    { id:"ucak",      tr:"U√áAK",        en:"Plane",       img:"assets/ucak.png" },
    { id:"tren",      tr:"TREN",        en:"Train",       img:"assets/tren.png" },
    { id:"otobus",    tr:"OTOB√úS",      en:"Bus",         img:"assets/otobus.png" },
    { id:"itfaiye",   tr:"ƒ∞TFAƒ∞YE ARACI",en:"Fire Truck", img:"assets/itfaiye.png" },

    // Hayvanlar (10 tane √∂rnek)
    { id:"aslan",     tr:"ASLAN",       en:"Lion",        img:"assets/aslan.png" },
    { id:"kaplan",    tr:"KAPLAN",      en:"Tiger",       img:"assets/kaplan.png" },
    { id:"fil",       tr:"Fƒ∞L",         en:"Elephant",    img:"assets/fil.png" },
    { id:"zurafa",    tr:"Z√úRAFA",      en:"Giraffe",     img:"assets/zurafa.png" },
    { id:"maymun",    tr:"MAYMUN",      en:"Monkey",      img:"assets/maymun.png" },
    { id:"kopek",     tr:"K√ñPEK",       en:"Dog",         img:"assets/kopek.png" },
    { id:"kedi",      tr:"KEDƒ∞",        en:"Cat",         img:"assets/kedi.png" },
    { id:"tavsan",    tr:"TAV≈ûAN",      en:"Rabbit",      img:"assets/tavsan.png" },
    { id:"ayi",       tr:"AYI",         en:"Bear",        img:"assets/ayi.png" },
    { id:"yunus",     tr:"YUNUS",       en:"Dolphin",     img:"assets/yunus.png" }
];

/* ==================== SESLER ==================== */
/* ƒ∞stersen sonra kendi seslerinle deƒüi≈ütirirsin. Dosyalar assets/ses/ klas√∂r√ºnde varsayƒ±lƒ±yor. */

const sounds = {
    // sayma sesleri
    count1: new Audio("assets/ses/1.mp3"),
    count2: new Audio("assets/ses/2.mp3"),
    count3: new Audio("assets/ses/3.mp3"),
    count4: new Audio("assets/ses/4.mp3"),
    count5: new Audio("assets/ses/5.mp3"),
    count6: new Audio("assets/ses/6.mp3"),
    count7: new Audio("assets/ses/7.mp3"),
    count8: new Audio("assets/ses/8.mp3"),
    // t√ºm sembolleri topladƒ±n
    bravoAll: new Audio("assets/ses/bravo.mp3"),
    // random peki≈ütire√ßler
    praise1: new Audio("assets/ses/aferin.mp3"),
    praise2: new Audio("assets/ses/bravo2.mp3"),
    praise3: new Audio("assets/ses/harika.mp3"),
    praise4: new Audio("assets/ses/supersin.mp3")
};

function playSound(key){
    if(!soundEnabled) return;
    const s = sounds[key];
    if(!s) return;
    try {
        s.currentTime = 0;
        s.play();
    } catch(e){}
}

/* ==================== YARDIMCI FONKSƒ∞YONLAR ==================== */

function shuffle(arr){
    for(let i = arr.length - 1; i > 0; i--){
        const j = Math.floor(Math.random() * (i+1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
    }
}

/* ==================== MEN√ú ‚Äì OYUN GE√áƒ∞≈ûƒ∞ ==================== */

function startGame(mode){
    selectedMode = mode;
    menu.style.display = "none";
    gameArea.style.display = "block";
    slideBackArea.style.display = "block";

    initSlideBall();
    initSymbols();
    startNewItem();
}

/* Men√ºye geri d√∂n */
function returnToMenu(){
    // ekranlarƒ± deƒüi≈ütir
    menu.style.display = "flex";
    gameArea.style.display = "none";
    slideBackArea.style.display = "none";

    // kartlarƒ± temizle
    optionsArea.innerHTML = "";
    dragContainer.innerHTML = "";
}

/* ==================== GERƒ∞ S√úR√úKLEME BAR (SAƒû ‚Üí SOL) ==================== */

let slideDragging = false;
let slideStartX = 0;
let slideBallStartX = 0;

function initSlideBall(){
    // topu saƒüa yerle≈ütir (ba≈ülangƒ±√ß)
    slideBall.style.right = "auto";
    slideBall.style.left = (slideBackArea.clientWidth - slideBall.offsetWidth - 10) + "px";
}

slideBall.addEventListener("mousedown", e=>{
    slideDragging = true;
    slideStartX = e.clientX;
    slideBallStartX = slideBall.offsetLeft;
    slideBall.style.cursor = "grabbing";
});

document.addEventListener("mousemove", e=>{
    if(!slideDragging) return;

    const dx = e.clientX - slideStartX;
    let newLeft = slideBallStartX + dx;

    const minLeft = 10;
    const maxLeft = slideBackArea.clientWidth - slideBall.offsetWidth - 10;
    if(newLeft < minLeft) newLeft = minLeft;
    if(newLeft > maxLeft) newLeft = maxLeft;

    slideBall.style.left = newLeft + "px";
});

document.addEventListener("mouseup", ()=>{
    if(!slideDragging) return;
    slideDragging = false;
    slideBall.style.cursor = "grab";

    const minLeft = 10;
    const maxLeft = slideBackArea.clientWidth - slideBall.offsetWidth - 10;

    // sola yeterince yakla≈üƒ±rsa men√ºye d√∂n
    if(slideBall.offsetLeft <= minLeft + 10){
        returnToMenu();
        initSlideBall();
    } else {
        slideBall.style.left = maxLeft + "px";
    }
});

/* ==================== SEMBOL Sƒ∞STEMƒ∞ ==================== */

function initSymbols(){
    collectedSymbols = 0;
    countingMode = false;
    symbolBar.innerHTML = "";
    symbolBoard.innerHTML = "";

    // √ßubukta 8 yƒ±ldƒ±z
    for(let i=0;i<maxSymbols;i++){
        const s = document.createElement("span");
        s.className = "bar-star";
        s.textContent = "‚≠ê";
        symbolBar.appendChild(s);
    }

    // sembol tahtasƒ± (bo≈ü, 8 yuvalƒ± g√∂r√ºn√ºm gibi)
    for(let i=0;i<maxSymbols;i++){
        const s = document.createElement("span");
        s.className = "board-star";
        s.textContent = "";
        symbolBoard.appendChild(s);
    }

    symbolBoard.onclick = handleBoardClick;
}

/* doƒüru e≈ülemede √ßaƒürƒ±lacak */
function gainSymbol(){
    if(collectedSymbols >= maxSymbols) return;

    const barStars = symbolBar.querySelectorAll(".bar-star");
    if(barStars.length === 0) return;

    const taken = barStars[0];
    const barRect = taken.getBoundingClientRect();
    const emptyBoardSlot = symbolBoard.children[collectedSymbols];
    const boardRect = emptyBoardSlot.getBoundingClientRect();

    // u√ßan yƒ±ldƒ±z
    const flying = document.createElement("div");
    flying.className = "flying-star";
    flying.textContent = "‚≠ê";
    flying.style.left = barRect.left + "px";
    flying.style.top  = barRect.top  + "px";
    document.body.appendChild(flying);

    const dx = boardRect.left + boardRect.width/2 - barRect.left;
    const dy = boardRect.top  + boardRect.height/2 - barRect.top;

    requestAnimationFrame(()=>{
        flying.style.transform = `translate(${dx}px, ${dy}px) scale(1.3)`;
        flying.style.opacity = "0";
    });

    setTimeout(()=>{
        flying.remove();
        // √ßubuktan yƒ±ldƒ±zƒ± azalt
        taken.remove();
        // tahtada dolu yƒ±ldƒ±z g√∂ster
        emptyBoardSlot.textContent = "‚≠ê";
        collectedSymbols++;

        if(collectedSymbols === maxSymbols){
            countingMode = true;
        }
    },600);
}

/* sembol sayma modu */
function handleBoardClick(e){
    if(!countingMode) return;
    if(!e.target.classList.contains("board-star")) return;
    if(e.target.textContent !== "‚≠ê") return;

    const stars = Array.from(symbolBoard.children).filter(s=>s.textContent==="‚≠ê");
    const index = stars.indexOf(e.target); // 0..7
    const countNumber = index + 1;

    playSound("count"+countNumber);

    // tahtadan sil, √ßubuƒüa geri ekle
    e.target.textContent = "";
    const backStar = document.createElement("span");
    backStar.className = "bar-star";
    backStar.textContent = "‚≠ê";
    symbolBar.appendChild(backStar);

    const remainingOnBoard = symbolBoard.querySelectorAll(".board-star")
        .length - symbolBoard.querySelectorAll(".board-star:not(:empty)").length;

    // t√ºm yƒ±ldƒ±zlar geri d√∂nd√º
    const anyStarLeft = Array.from(symbolBoard.children).some(s=>s.textContent==="‚≠ê");
    if(!anyStarLeft){
        countingMode = false;
        playSound("bravoAll");
        // tekrar yeni semboller kazanƒ±lmaya devam edebilir
    }
}

/* ==================== OYUN MANTIƒûI ==================== */

function startNewItem(){
    correctCountForItem = 0;
    pickNewObject();
    setupRound();
}

function pickNewObject(){
    currentItem = allObjects[Math.floor(Math.random()*allObjects.length)];
}

function setupRound(){
    // y√∂nerge
    instructionBox.innerHTML =
        "Y√ñNERGE :<br>" +
        "- E≈ûLE<br>" +
        "- AYNI OLANI E≈ûLE<br>" +
        `- ${currentItem.tr}Yƒ∞ E≈ûLE`;

    // √ºst se√ßenekleri √ºret
    createOptionCards();

    // s√ºr√ºklenen kartƒ± olu≈ütur
    createDragCard();
}

function createOptionCards(){
    optionsArea.innerHTML = "";
    let choices = [currentItem];
    let others = allObjects.filter(o=>o.id!==currentItem.id);

    while(choices.length < selectedMode){
        const cand = others[Math.floor(Math.random()*others.length)];
        if(!choices.some(o=>o.id===cand.id)){
            choices.push(cand);
        }
    }

    shuffle(choices);
    currentChoices = choices;

    const screenW = window.innerWidth;
    const cardW = 165;
    const gap = 22;
    const totalWidth = choices.length * cardW + (choices.length - 1)*gap;
    const startX = (screenW - totalWidth)/2;

    choices.forEach((obj,i)=>{
        const c = document.createElement("div");
        c.className = "card";
        c.classList.add("choice-card");
        c.dataset.id = obj.id;
        c.style.top  = "120px";
        c.style.left = (startX + i*(cardW+gap)) + "px";
        c.innerHTML = `
            <div class="cardTitleTr">${obj.tr}</div>
            <img src="${obj.img}" alt="${obj.tr}">
            <div class="cardTitleEn">${obj.en}</div>
        `;
        optionsArea.appendChild(c);
    });
}

function createDragCard(){
    dragContainer.innerHTML = "";
    const c = document.createElement("div");
    c.className = "card";
    c.classList.add("draggable-card");
    c.innerHTML = `
        <div class="cardTitleTr">${currentItem.tr}</div>
        <img src="${currentItem.img}" alt="${currentItem.tr}">
        <div class="cardTitleEn">${currentItem.en}</div>
    `;

    const cardW = 165;
    c.style.top  = "360px";
    c.style.left = (window.innerWidth/2 - cardW/2) + "px";

    dragContainer.appendChild(c);
    makeDraggable(c);
}

/* ==================== S√úR√úKLE ‚Äì BIRAK ==================== */

function makeDraggable(card){
    card.addEventListener("mousedown", e=>{
        dragCard = card;
        dragStartX = e.clientX;
        dragStartY = e.clientY;
        cardStartX = card.offsetLeft;
        cardStartY = card.offsetTop;
        card.style.cursor = "grabbing";
    });
}

document.addEventListener("mousemove", e=>{
    if(!dragCard) return;
    const dx = e.clientX - dragStartX;
    const dy = e.clientY - dragStartY;

    dragCard.style.left = (cardStartX + dx) + "px";
    dragCard.style.top  = (cardStartY + dy) + "px";
});

document.addEventListener("mouseup", e=>{
    if(!dragCard) return;

    const dropX = e.clientX;
    const dropY = e.clientY;
    let hitCard = null;

    const choices = document.querySelectorAll(".choice-card");
    choices.forEach(ch=>{
        const r = ch.getBoundingClientRect();
        if(dropX >= r.left && dropX <= r.right &&
           dropY >= r.top  && dropY <= r.bottom){
            hitCard = ch;
        }
    });

    if(hitCard){
        if(hitCard.dataset.id === currentItem.id){
            // DOƒûRU
            hitCard.classList.add("correct");
            setTimeout(()=>hitCard.classList.remove("correct"), 350);

            // random aferin vb sesi
            const keys = ["praise1","praise2","praise3","praise4"];
            const k = keys[Math.floor(Math.random()*keys.length)];
            playSound(k);

            // sembol kazan
            gainSymbol();

            correctCountForItem++;

            // kartƒ± geri yuvasƒ±na g√∂nder
            dragCard.style.left = cardStartX + "px";
            dragCard.style.top  = cardStartY + "px";

            if(correctCountForItem >= 2){
                // yeni nesne
                setTimeout(()=>{
                    startNewItem();
                },650);
            } else {
                // aynƒ± nesneyi tekrar sor: se√ßenekleri karƒ±≈ütƒ±r
                setTimeout(()=>{
                    createOptionCards();
                },650);
            }

        } else {
            // YANLI≈û
            hitCard.classList.add("wrong");
            setTimeout(()=>hitCard.classList.remove("wrong"), 350);

            dragCard.style.left = cardStartX + "px";
            dragCard.style.top  = cardStartY + "px";
        }
    } else {
        // hi√ßbir karta bƒ±rakmadƒ±, geri d√∂n
        dragCard.style.left = cardStartX + "px";
        dragCard.style.top  = cardStartY + "px";
    }

    dragCard.style.cursor = "grab";
    dragCard = null;
});

/* ==================== SES BUTONU ==================== */

soundBtn.addEventListener("click", ()=>{
    soundEnabled = !soundEnabled;
    soundBtn.textContent = soundEnabled ? "üîä Sesi Kapat" : "üîá Sesi A√ß";
});
</script>

</body>
</html>
