<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nesne EÅŸleme Oyunu</title>

    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
            background: linear-gradient(to bottom, #8cc6ff, #d9eaff);
        }

        .menu-container {
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        h1 {
            font-size: 42px;
            color: #333;
            margin-bottom: 10px;
            font-weight: 800;
        }

        .menu-subtitle {
            font-size: 20px;
            margin-bottom: 35px;
            color: #444;
        }

        .menu-btn {
            width: 320px;
            padding: 15px;
            margin: 10px;
            border-radius: 12px;
            background: #ff9e47;
            color: white;
            font-size: 20px;
            font-weight: bold;
            border: none;
            cursor: pointer;
            transition: 0.2s;
        }

        .menu-btn:hover {
            transform: scale(1.05);
            background: #ff7b0f;
        }

        /* --- Oyun AlanÄ± --- */
        #gameArea {
            display: none;
            width: 100%;
            height: 100vh;
            position: relative;
        }

        .instruction-box {
            position: absolute;
            top: 20px;
            left: 25px;
            padding: 18px;
            width: 260px;
            background: #ffcb7c;
            border-radius: 14px;
            border: 3px solid #e28a2c;
            font-size: 18px;
            font-weight: bold;
        }

        .top-options {
            position: absolute;
            top: 140px;
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 40px;
        }

        .card {
            width: 160px;
            height: 230px;
            background: white;
            border-radius: 14px;
            border: 3px solid #dcdcdc;
            text-align: center;
            padding-top: 8px;
            font-weight: bold;
            position: relative;
        }

        .card img {
            width: 110px;
            height: 110px;
            object-fit: contain;
            margin-top: 4px;
        }

        /* SÃ¼rÃ¼klenen kart */
        #dragCard {
            position: absolute;
            top: 420px;
            left: calc(50% - 80px);
            cursor: grab;
        }

        /* Sembol BarÄ± */
        #symbolBar {
            position: absolute;
            bottom: 55px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
        }

        .symbol {
            font-size: 30px;
            opacity: 0.3;
        }

        /* Sembol TahtasÄ± */
        #symbolBoard {
            position: absolute;
            bottom: 35px;
            right: 35px;
            width: 190px;
            height: 100px;
            border-radius: 12px;
            border: 2px solid #aaaaaa;
            background: rgba(255,255,255,0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        /* Ses butonu */
        #soundBtn {
            position: absolute;
            bottom: 20px;
            left: 30px;
            padding: 10px 15px;
            border-radius: 12px;
            background: #4b91ff;
            color: #fff;
            cursor: pointer;
            font-weight: bold;
            border: none;
        }
    </style>
</head>

<body>

<div id="menu" class="menu-container">
    <h1>ðŸŽ¯ NESNE EÅžLEME OYUNU</h1>
    <div class="menu-subtitle">Bir eÅŸleme modu seÃ§ ve oyuna baÅŸla!</div>

    <button class="menu-btn" onclick="startGame(1)">1 SeÃ§enekli EÅŸleme</button>
    <button class="menu-btn" onclick="startGame(2)">2 SeÃ§enekli EÅŸleme</button>
    <button class="menu-btn" onclick="startGame(3)">3 SeÃ§enekli EÅŸleme</button>
    <button class="menu-btn" onclick="startGame(4)">4 SeÃ§enekli EÅŸleme</button>
    <button class="menu-btn" onclick="startGame(5)">5 SeÃ§enekli EÅŸleme</button>
    <button class="menu-btn" onclick="startGame(7)">7 SeÃ§enekli EÅŸleme</button>
</div>

<div id="gameArea">
    <!-- YÃ¶nerge Kutusu -->
    <div class="instruction-box">
        <div style="font-size:15px;">YÃ–NERGE :</div>
        <div style="font-size:14px;">EÅŸle</div>
        <div style="font-size:14px;">AynÄ± olanÄ± eÅŸle</div>
        <div id="instructionText" style="font-size:15px;"></div>
    </div>

    <!-- Ãœstteki seÃ§enek kartlarÄ± -->
    <div id="optionsRow" class="top-options"></div>

    <!-- SÃ¼rÃ¼klenen kart -->
    <div id="dragCard" class="card">
        <div id="dragTR" style="font-size:16px; margin-top:4px; font-weight:800;"></div>
        <img id="dragIMG" src="">
        <div id="dragEN" style="font-size:14px; margin-bottom:6px; font-style:italic;"></div>
    </div>

    <!-- Sembol BarÄ± -->
    <div id="symbolBar"></div>

    <!-- Sembol TahtasÄ± -->
    <div id="symbolBoard"></div>

    <!-- Ses AÃ§/Kapat -->
    <button id="soundBtn" onclick="toggleSound()">ðŸ”Š Ses AÃ§Ä±k</button>

</div> <!-- gameArea kapanÄ±ÅŸÄ± -->


<!-- BURADAN SONRA PARÃ‡A 3 GELECEK -->
<script>
/* ============================================================
   PARÃ‡A 3 â€” OYUN MOTORU BAÅžLANGIÃ‡
============================================================ */

/* GLOBAL DEÄžÄ°ÅžKENLER */
let optionCount = 1;
let currentTarget = null;
let currentOptions = [];
let dragging = false;
let audioOn = true;
let symbolsCollected = 0;

/* NESNE LÄ°STESÄ° */
const items = [
    {tr:"Elma", en:"Apple", img:"assets/elma.png"},
    {tr:"Armut", en:"Pear", img:"assets/armut.png"},
    {tr:"Muz", en:"Banana", img:"assets/muz.png"},
    {tr:"Karpuz", en:"Watermelon", img:"assets/karpuz.png"},
    {tr:"Kavun", en:"Melon", img:"assets/kavun.png"},
    {tr:"Ã‡ilek", en:"Strawberry", img:"assets/cilek.png"},
    {tr:"Portakal", en:"Orange", img:"assets/portakal.png"},
    {tr:"Kivi", en:"Kiwi", img:"assets/kivi.png"},
    {tr:"ÃœzÃ¼m", en:"Grapes", img:"assets/uzum.png"},
    {tr:"Ananas", en:"Pineapple", img:"assets/ananas.png"},

    {tr:"Domates", en:"Tomato", img:"assets/domates.png"},
    {tr:"Biber", en:"Pepper", img:"assets/biber.png"},
    {tr:"SoÄŸan", en:"Onion", img:"assets/sogan.png"},
    {tr:"SarÄ±msak", en:"Garlic", img:"assets/sarimsak.png"},
    {tr:"Brokoli", en:"Broccoli", img:"assets/brokoli.png"},
    {tr:"HavuÃ§", en:"Carrot", img:"assets/havuc.png"},
    {tr:"Lahana", en:"Cabbage", img:"assets/lahana.png"},
    {tr:"MÄ±sÄ±r", en:"Corn", img:"assets/misir.png"},
    {tr:"PatlÄ±can", en:"Eggplant", img:"assets/patlican.png"},

    {tr:"KÃ¶pek", en:"Dog", img:"assets/kopek.png"},
    {tr:"Kedi", en:"Cat", img:"assets/kedi.png"},
    {tr:"Aslan", en:"Lion", img:"assets/aslan.png"},
    {tr:"AyÄ±", en:"Bear", img:"assets/ayi.png"},
    {tr:"At", en:"Horse", img:"assets/at.png"},
    {tr:"TavÅŸan", en:"Rabbit", img:"assets/tavsan.png"},
    {tr:"Tavuk", en:"Chicken", img:"assets/tavuk.png"},
    {tr:"Koyun", en:"Sheep", img:"assets/koyun.png"},
    {tr:"Ä°nek", en:"Cow", img:"assets/inek.png"},
    {tr:"Kaplan", en:"Tiger", img:"assets/kaplan.png"},

    {tr:"Araba", en:"Car", img:"assets/araba.png"},
    {tr:"Kamyon", en:"Truck", img:"assets/kamyon.png"},
    {tr:"OtobÃ¼s", en:"Bus", img:"assets/otobus.png"},
    {tr:"Gemi", en:"Ship", img:"assets/gemi.png"},
    {tr:"UÃ§ak", en:"Plane", img:"assets/ucak.png"},
    {tr:"Helikopter", en:"Helicopter", img:"assets/helikopter.png"},
    {tr:"Motosiklet", en:"Motorcycle", img:"assets/motosiklet.png"},
    {tr:"Bisiklet", en:"Bicycle", img:"assets/bisiklet.png"},
    {tr:"Tren", en:"Train", img:"assets/tren.png"},
    {tr:"Ä°tfaiye", en:"Firetruck", img:"assets/itfaiye.png"}
];


/* MENÃœ â†’ OYUN GEÃ‡Ä°ÅžÄ° */
function startGame(n){
    optionCount = n;

    document.getElementById("menu").style.display = "none";
    document.getElementById("gameArea").style.display = "block";

    resetSymbols();
    createNewRound();
}

/* ARRAY KARIÅžTIR */
function shuffle(arr){
    for (let i = arr.length - 1; i > 0; i--){
        let j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
    }
}

/* === TUR OLUÅžTURMA === */
function createNewRound(){
    // 1) SeÃ§enekleri seÃ§
    currentOptions = [...items];
    shuffle(currentOptions);
    currentOptions = currentOptions.slice(0, optionCount);

    // 2) Hedef seÃ§
    currentTarget = currentOptions[Math.floor(Math.random() * currentOptions.length)];

    // 3) YÃ¶nerge gÃ¼ncelle
    document.getElementById("instructionText").innerText =
        `${currentTarget.tr.toUpperCase()}YI EÅžLE`;

    // 4) SÃ¼rÃ¼klenen kartÄ± doldur
    document.getElementById("dragTR").innerText = currentTarget.tr.toUpperCase();
    document.getElementById("dragIMG").src = currentTarget.img;
    document.getElementById("dragEN").innerText = currentTarget.en;

    // 5) Ãœst kartlarÄ± oluÅŸtur
    fillOptions();
}

/* === ÃœSTTEKÄ° KARTLARI YERLEÅžTÄ°R === */
function fillOptions(){
    const row = document.getElementById("optionsRow");
    row.innerHTML = "";

    let temp = [...currentOptions];
    shuffle(temp);

    temp.forEach(item => {
        let c = document.createElement("div");
        c.className = "card";
        c.dataset.name = item.tr;

        c.innerHTML = `
            <div style="margin-top:4px;">${item.tr.toUpperCase()}</div>
            <img src="${item.img}">
            <div style="font-size:14px; font-style:italic;">${item.en}</div>
        `;

        c.onclick = () => checkMatch(item, c);

        row.appendChild(c);
    });
}

/* === TIKLAMA Ä°LE EÅžLEME KONTROLÃœ === */
function checkMatch(selected, cardElement){
    if (selected.tr === currentTarget.tr){
        cardElement.style.borderColor = "#2ecc71";

        giveSymbol();

        setTimeout(()=>{
            createNewRound();
        }, 600);

    } else {
        cardElement.style.borderColor = "#e74c3c";
        setTimeout(()=>{
            cardElement.style.borderColor = "#dcdcdc";
        }, 500);
    }
}
/* ============================================================
   PARÃ‡A 4 â€” DRAG & DROP + SEMBOL SÄ°STEMÄ° + SESLER + ANÄ°MASYON
============================================================ */

/* ===================== SÃœRÃœKLE-BIRAK ===================== */

let offsetX = 0;
let offsetY = 0;

const dragCard = document.getElementById("dragCard");

dragCard.addEventListener("mousedown", startDrag);
document.addEventListener("mouseup", stopDrag);
document.addEventListener("mousemove", dragMove);

function startDrag(e){
    dragging = true;
    dragCard.style.transition = "0s";
    offsetX = e.clientX - dragCard.offsetLeft;
    offsetY = e.clientY - dragCard.offsetTop;
}

function dragMove(e){
    if(!dragging) return;

    dragCard.style.left = (e.clientX - offsetX) + "px";
    dragCard.style.top  = (e.clientY - offsetY) + "px";
}

function stopDrag(){
    if(!dragging) return;
    dragging = false;

    checkDrop();
}

/* Kart temas kontrolÃ¼ */
function checkDrop(){
    const opts = [...document.querySelectorAll(".card")].filter(c => c !== dragCard);

    const d = dragCard.getBoundingClientRect();

    for(let opt of opts){
        const r = opt.getBoundingClientRect();

        const overlaps =
            !(d.right < r.left || d.left > r.right || d.bottom < r.top || d.top > r.bottom);

        if(overlaps){
            if(opt.dataset.name === currentTarget.tr){
                opt.style.borderColor = "#27ae60";
                giveSymbol();
                setTimeout(()=>{
                    resetDrag();
                    createNewRound();
                },500);
            } else {
                opt.style.borderColor = "#e74c3c";
                setTimeout(()=> opt.style.borderColor="#dcdcdc",400);
                resetDrag();
            }
            return;
        }
    }

    resetDrag();
}

/* Drag kartÄ± geri gÃ¶nder */
function resetDrag(){
    dragCard.style.transition = "0.4s";
    dragCard.style.left = "calc(50% - 80px)";
    dragCard.style.top  = "420px";
}


/* ===================== SES SÄ°STEMÄ° ===================== */

let praiseSounds = [
    new Audio("ses/aferin.mp3"),
    new Audio("ses/bravo.mp3"),
    new Audio("ses/supersin.mp3"),
    new Audio("ses/harika.mp3")
];

let countSounds = [
    new Audio("ses/1.mp3"),
    new Audio("ses/2.mp3"),
    new Audio("ses/3.mp3"),
    new Audio("ses/4.mp3"),
    new Audio("ses/5.mp3"),
    new Audio("ses/6.mp3"),
    new Audio("ses/7.mp3"),
    new Audio("ses/8.mp3")
];

let finishSound = new Audio("ses/finish.mp3");

function toggleSound(){
    audioOn = !audioOn;
    document.getElementById("soundBtn").innerText =
        audioOn ? "ðŸ”Š Ses AÃ§Ä±k" : "ðŸ”‡ Ses KapalÄ±";
}

function playPraise(){
    if(!audioOn) return;
    let s = praiseSounds[Math.floor(Math.random()*praiseSounds.length)];
    s.play();
}


/* ===================== SEMBOL BAR + TAHTA ===================== */

function resetSymbols(){
    symbolsCollected = 0;

    const bar = document.getElementById("symbolBar");
    bar.innerHTML = "";
    for(let i=0;i<8;i++){
        let d = document.createElement("div");
        d.className = "symbol";
        d.dataset.index = i;
        d.textContent = "â­";
        d.style.opacity = "0.25";
        bar.appendChild(d);
    }

    const board = document.getElementById("symbolBoard");
    board.innerHTML = "";
    for(let i=0;i<8;i++){
        let s = document.createElement("div");
        s.className = "symbol";
        s.dataset.slot = i;
        s.style.opacity = "0.15";
        board.appendChild(s);
    }
}


/* UÃ§an yÄ±ldÄ±z animasyonu */
function animateStar(targetIndex){
    const fly = document.createElement("div");
    fly.innerText = "â­";
    fly.style.position = "absolute";
    fly.style.left = "50%";
    fly.style.top = "50%";
    fly.style.fontSize = "40px";
    fly.style.transform = "translate(-50%, -50%) scale(0.1)";
    fly.style.transition = "0.6s";
    fly.style.zIndex = "999";

    document.body.appendChild(fly);

    setTimeout(()=>{
        const slot = document.querySelector(`[data-slot='${targetIndex}']`);
        const r = slot.getBoundingClientRect();
        fly.style.left = r.left + "px";
        fly.style.top  = r.top  + "px";
        fly.style.transform = "scale(1)";
        fly.style.opacity = "0.1";
    },50);

    setTimeout(()=> fly.remove(),650);
}


/* Sembol kazanma */
function giveSymbol(){
    playPraise();
    animateStar(symbolsCollected);

    // Bar gÃ¼ncelle
    const barSlot = document.querySelector(`[data-index='${symbolsCollected}']`);
    barSlot.style.opacity = "1";

    // Tahta gÃ¼ncelle
    const boardSlot = document.querySelector(`[data-slot='${symbolsCollected}']`);
    boardSlot.style.opacity = "1";

    symbolsCollected++;

    if(symbolsCollected >= 8){
        setTimeout(()=> countSymbols(), 700);
    }
}


/* ===================== SEMBOL SAYMA ===================== */

function countSymbols(){
    if(!audioOn){
        resetSymbols();
        createNewRound();
        return;
    }

    let i = 0;

    function sayNext(){
        if(i < 8){
            countSounds[i].play();
            i++;
            setTimeout(sayNext,900);
        } else {
            finishSound.play();
            setTimeout(()=>{
                resetSymbols();
                createNewRound();
            },1500);
        }
    }

    sayNext();
}

</script>

</body>
</html>
