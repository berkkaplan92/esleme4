<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>AraÃ§larÄ± EÅŸleÅŸtirme - V25.2</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    /* ==== GENEL AYARLAR ==== */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: linear-gradient(135deg, #fdfbfb, #ebedee);
      min-height: 100vh;
    }

    .app-wrapper {
      max-width: 1200px;
      margin: 0 auto;
      padding: 16px;
      position: relative;
    }

    /* ==== ÃœST BAR & MENÃœ BUTONU ==== */

    .top-bar {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 8px;
    }

    .menu-button {
      border: none;
      padding: 10px 16px;
      border-radius: 999px;
      background: #ffca28;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
      transition: transform 0.1s ease, box-shadow 0.1s ease;
    }

    .menu-button:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.18);
    }

    .game-title {
      font-size: 1.5rem;
    }

    /* ==== OYUN ALANI ==== */

    .game-area {
      position: relative;
      padding-bottom: 180px; /* sembol tahtasÄ± iÃ§in alt boÅŸluk */
    }

    .card-row {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 24px;
    }

    /* Ãœst kartlarÄ± menÃ¼ye daha yakÄ±n, altla mesafe olsun */
    .top-cards {
      margin-top: 8px;      /* menÃ¼ butonuna yakÄ±n */
      margin-bottom: 64px;  /* Ã¼st & alt kartlar arasÄ± boÅŸluk */
    }

    .bottom-cards {
      margin-bottom: 40px;
    }

    /* ==== KART TASARIMI ==== */

    .card {
      width: 140px;
      height: 180px;
      border-radius: 16px;
      background: #ffffff;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.12);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      align-items: center;
      padding: 8px;
      text-align: center;
      user-select: none;
    }

    .card img {
      max-width: 100%;
      max-height: 90px;
      object-fit: contain;
      user-select: none;
      pointer-events: none; /* sÃ¼rÃ¼klemede sadece kart tutulacak */
    }

    .card-label {
      font-size: 0.95rem;
      font-weight: 600;
    }

    /* SÃ¼rÃ¼klenebilir kart */
    .draggable {
      cursor: grab;
    }

    .draggable:active {
      cursor: grabbing;
    }

    /* Hedef kart (drop alanÄ±) */
    .drop-zone {
      border: 3px dashed #b0bec5;
      position: relative;
      transition: border-color 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
    }

    .drop-placeholder {
      opacity: 0.3;
      max-width: 100%;
      max-height: 90px;
    }

    .drop-zone .card-label {
      opacity: 0.7;
    }

    .drop-zone.highlight {
      border-color: #42a5f5;
      box-shadow: 0 0 0 3px rgba(66, 165, 245, 0.2);
    }

    .drop-zone.matched {
      border-style: solid;
      border-color: #66bb6a;
      background: #e8f5e9;
    }

    /* ==== SEMBOL TAHTASI (SAÄž ALT DÄ°KDÃ–RTGEN) ==== */

    .symbol-board {
      position: fixed;
      right: 24px;
      bottom: 24px;
      width: 260px;   /* kÄ±sa kenar yatay */
      height: 140px;  /* uzun kenar dikey */
      background: #ffffff;
      border-radius: 24px;
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.18);
      padding: 12px 16px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      z-index: 100;
    }

    .symbol-title {
      font-weight: 700;
      font-size: 1rem;
      margin-bottom: 4px;
    }

    .symbol-stars {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .star {
      font-size: 1.4rem;
      opacity: 0.25;
      transition: opacity 0.2s ease, transform 0.2s ease;
    }

    .star.active {
      opacity: 1;
      transform: scale(1.05);
    }

    /* ==== KÃœÃ‡ÃœK EKRAN ==== */

    @media (max-width: 768px) {
      .card {
        width: 120px;
        height: 160px;
      }

      .symbol-board {
        width: 220px;
        height: 130px;
        right: 12px;
        bottom: 12px;
      }
    }
  </style>
</head>
<body>
  <div class="app-wrapper">
    <header class="top-bar">
      <button class="menu-button" onclick="goToMenu()">
        â¬… Men&uuml;ye D&ouml;n
      </button>
      <h1 class="game-title">AraÃ§larÄ± EÅŸleÅŸtirme</h1>
    </header>

    <main class="game-area">
      <!-- Ãœstteki sÃ¼rÃ¼klenebilir kartlar -->
      <section class="card-row top-cards" id="topCards"></section>

      <!-- Alttaki hedef kartlar -->
      <section class="card-row bottom-cards" id="bottomCards"></section>

      <!-- SaÄŸ alt kÃ¶ÅŸede sembol tahtasÄ± -->
      <aside class="symbol-board">
        <div class="symbol-title">Sembol TahtasÄ±</div>
        <div class="symbol-stars" id="symbolStars"></div>
      </aside>
    </main>
  </div>

  <script>
    /* =================== VERÄ°LER =================== */
    const cardsData = [
      {
        id: "itfaiye_arabasi",
        label: "Ä°tfaiye ArabasÄ±",
        image: "itfaiye_arabasi.png"   // >>> Ä°STEDÄ°ÄžÄ°N DOSYA ADI <<<
      },
      {
        id: "polis_arabasi",
        label: "Polis ArabasÄ±",
        image: "polis_arabasi.png"
      },
      {
        id: "ambulans",
        label: "Ambulans",
        image: "ambulans.png"
      },
      {
        id: "otobus",
        label: "OtobÃ¼s",
        image: "otobus.png"
      }
    ];

    // Ä°stersen sadece Ä°TFAÄ°YE ile Ã§alÄ±ÅŸmak iÃ§in:
    // const cardsData = [ { id:"itfaiye_arabasi", label:"Ä°tfaiye ArabasÄ±", image:"itfaiye_arabasi.png" } ];

    const TOTAL_STARS = 8;
    let draggedCardId = null;
    let matchedCount = 0;

    /* =================== WEB AUDIO (DÄ°JÄ°TAL BÄ°P) =================== */
    let audioContext = null;

    function initAudioContext() {
      if (!audioContext) {
        audioContext = new (window.AudioContext || window.webkitAudioContext)();
      }
    }

    function playBeep(type = "success") {
      initAudioContext();
      const osc = audioContext.createOscillator();
      const gain = audioContext.createGain();

      osc.type = "square";
      osc.frequency.value = type === "success" ? 880 : 220; // ince / kalÄ±n

      osc.connect(gain);
      gain.connect(audioContext.destination);

      const now = audioContext.currentTime;
      gain.gain.setValueAtTime(0.2, now);
      gain.gain.exponentialRampToValueAtTime(0.001, now + 0.15);

      osc.start(now);
      osc.stop(now + 0.15);
    }

    /* =================== DOM YÃœKLENDÄ°ÄžÄ°NDE =================== */
    document.addEventListener("DOMContentLoaded", () => {
      renderCards();
      setupSymbolBoard();
    });

    /* =================== KARTLARI OLUÅžTUR =================== */
    function renderCards() {
      const topContainer = document.getElementById("topCards");
      const bottomContainer = document.getElementById("bottomCards");

      // Ãœst kartlarÄ± karÄ±ÅŸÄ±k sÄ±rala
      const shuffled = [...cardsData].sort(() => Math.random() - 0.5);

      // ÃœST: sÃ¼rÃ¼klenebilir kartlar
      shuffled.forEach(card => {
        const cardEl = document.createElement("div");
        cardEl.className = "card draggable";
        cardEl.draggable = true;
        cardEl.dataset.cardId = card.id;

        cardEl.innerHTML = `
          <img src="${card.image}" alt="${card.label}" />
          <div class="card-label">${card.label}</div>
        `;

        cardEl.addEventListener("dragstart", onDragStart);
        cardEl.addEventListener("dragend", onDragEnd);

        topContainer.appendChild(cardEl);
      });

      // ALT: hedef (drop) kartlarÄ±
      cardsData.forEach(card => {
        const dropEl = document.createElement("div");
        dropEl.className = "card drop-zone";
        dropEl.dataset.cardId = card.id;

        dropEl.innerHTML = `
          <img class="drop-placeholder" src="${card.image}" alt="${card.label}" />
          <div class="card-label">${card.label}</div>
        `;

        dropEl.addEventListener("dragover", onDragOver);
        dropEl.addEventListener("dragleave", onDragLeave);
        dropEl.addEventListener("drop", onDrop);

        bottomContainer.appendChild(dropEl);
      });
    }

    /* =================== DRAG & DROP EVENTLERÄ° =================== */

    function onDragStart(e) {
      const cardEl = e.currentTarget; // her zaman .card
      draggedCardId = cardEl.dataset.cardId;

      // bazÄ± tarayÄ±cÄ±larda bu zorunlu
      e.dataTransfer.effectAllowed = "move";
      e.dataTransfer.setData("text/plain", draggedCardId);
    }

    function onDragEnd() {
      draggedCardId = null;
    }

    function onDragOver(e) {
      e.preventDefault();
      e.dataTransfer.dropEffect = "move";
      this.classList.add("highlight");
    }

    function onDragLeave() {
      this.classList.remove("highlight");
    }

    function onDrop(e) {
      e.preventDefault();
      this.classList.remove("highlight");

      const targetId = this.dataset.cardId;
      const droppedId = draggedCardId || e.dataTransfer.getData("text/plain");
      if (!droppedId) return;

      if (targetId === droppedId) {
        handleCorrectDrop(this, droppedId);
      } else {
        handleWrongDrop();
      }
    }

    function handleCorrectDrop(dropZone, cardId) {
      // AynÄ± yere tekrar eÅŸleÅŸme yapÄ±lmasÄ±n
      if (dropZone.classList.contains("matched")) return;

      // Ãœstteki kartÄ± bul ve pasif hale getir
      const topCards = document.querySelectorAll(".draggable");
      topCards.forEach(card => {
        if (card.dataset.cardId === cardId) {
          card.draggable = false;
          card.style.opacity = "0.3";
          card.style.cursor = "default";
        }
      });

      dropZone.classList.add("matched");
      playBeep("success");
      increaseScore();
    }

    function handleWrongDrop() {
      playBeep("error");
    }

    /* =================== SEMBOL TAHTASI - YILDIZLAR =================== */

    function setupSymbolBoard() {
      const container = document.getElementById("symbolStars");
      container.innerHTML = "";

      for (let i = 0; i < TOTAL_STARS; i++) {
        const star = document.createElement("span");
        star.className = "star";
        star.textContent = "â˜…";
        container.appendChild(star);
      }

      updateStars();
    }

    function increaseScore() {
      matchedCount++;
      if (matchedCount > TOTAL_STARS) matchedCount = TOTAL_STARS;
      updateStars();
    }

    function updateStars() {
      const stars = document.querySelectorAll(".symbol-board .star");
      stars.forEach((star, index) => {
        star.classList.toggle("active", index < matchedCount);
      });
    }

    /* =================== MENÃœ BUTONU =================== */

    function goToMenu() {
      alert("Buraya ana menÃ¼ sayfanÄ±n linkini ekleyebilirsin, Pikam ðŸ’›");
    }
  </script>
</body>
</html>
